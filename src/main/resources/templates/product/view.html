<!DOCTYPE html>
<html lang="ko"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default}">


<!-- 본문 내용 -->
<div layout:fragment="content">
    <head>
        <link rel="stylesheet" type="text/css"
              href="https://contents.kyobobook.co.kr/resources/fo/css/components_ink.css">
        <link rel="stylesheet" type="text/css" href="https://contents.kyobobook.co.kr/resources/fo/css/product_ink.css">

        <link rel="stylesheet" type="text/css" href="/css/view.css">
    </head>
    <body>


    <div class="prod_detail_header">
        <div class="header_contents_inner">
            <div class="prod_detail_title_wrap">
                <div class="prod_title_area">
                    <div class="prod_title_box auto_overflow_wrap">
                        <div class="auto_overflow_contents">
                            <div class="auto_overflow_inner">
                                <h1>
                                    <span class="prod_title" th:text="${book.bookTitle}"></span>
                                </h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="prod_detail_view_wrap">
                <div class="prod_detail_view_area">
                    <div class="col_prod_info">
                        <div class="prod_info_wrap">
                            <div class="prod_author_box auto_overflow_wrap">
                                <div class="auto_overflow_contents">
                                    <div class="auto_overflow_inner">
                                        <div class="author">
                                            <a href="#" th:text="${authorNames}">
                                            </a> 저자(글)
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="prod_info_text publish_date">

                                <a href="#" class="btn_publish_link"
                                   th:text="${book.bookPublisher} + ' ' + ${book.bookPublicationDate}"></a>

                            </div>

                            <div class="prod_review_box">
                                <div class="col_review">
                                    <span class="review_quotes_text">도움돼요</span>
                                    <span class="review_desc">(<span class="val">39%</span>의 구매자)</span>
                                </div>

                                <button type="button" class="btn_go_review"><span class="hidden">리뷰 영역으로 가기</span>
                                </button>
                            </div>
                        </div>
                    </div>


                    <div class="col_prod_info thumb">
                        <div class="prod_thumb_swiper_wrap active">
                            <div class="swiper-container prod_thumb_list_wrap swiper-container-fade swiper-container-horizontal">
                                <ul class="swiper-wrapper">
                                    <li class="prod_thumb_item swiper-slide swiper-slide-visible swiper-slide-active"
                                        style="width: 380px; opacity: 1; transform: translate3d(0px, 0px, 0px);">
                                        <div class="blur_img_wrap portrait">
                                            <div class="blur_img_box">
                                                <img th:data-src="${book.thumbnail}"
                                                     th:src="${book.thumbnail}"
                                                     alt="대표 이미지">
                                            </div>
                                            <div class="portrait_img_box portrait">

                                                <img th:src="${book.thumbnail}"
                                                     alt="대표 이미지">
                                            </div>
                                        </div>
                                    </li>

                                </ul>
                                <span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span></div>
                            <div class="swiper_control_box">
                                <button type="button" class="swiper-button-prev swiper-button-disabled" tabindex="0"
                                        role="button" aria-label="Previous slide" aria-disabled="true"><span
                                        class="hidden">이전</span></button>
                                <div class="swiper-pagination swiper-pagination-fraction"><span
                                        class="swiper-pagination-current">01</span> / <span
                                        class="swiper-pagination-total">01</span></div>
                                <button type="button" class="swiper-button-next" tabindex="0" role="button"
                                        aria-label="Next slide" aria-disabled="false"><span class="hidden">다음</span>
                                </button>
                            </div>
                            <div class="swiper_control_floating_box">
                                <button type="button" class="btn_swiper_floating prev disabled"><span
                                        class="hidden">이전</span></button>
                                <button type="button" class="btn_swiper_floating next"><span class="hidden">다음</span>
                                </button>

                                <button type="button" class="btn_img_zoom" data-role="btn-dialog"
                                        data-target="#popImgZoom"><span class="text">크게보기</span></button>
                            </div>
                        </div>
                    </div>
                    <div class="col_prod_info">
                        <div class="prod_price_wrap">
                            <div class="badge_list_box" th:each="tag : ${book.tagNames}">
                                <span class="badge_md badge_line_primary"><span class="text"
                                                                                th:text="${tag}"></span></span>
                            </div>
                            <div class="prod_price_box">
                                <div class="prod_price">
                                    <span class="percent" th:text="${book.bookDiscountRate} + '%'"></span>
                                    <span class="price">
                                        <span class="val"
                                              th:text="${#numbers.formatInteger(book.bookSalePrice, 3, 'COMMA')} + '원'">
                                        </span>
                                    </span>
                                    <span class="sale_price">
                                        <s class="val"
                                           th:text="${#numbers.formatInteger(book.bookRegularPrice, 3, 'COMMA')} + '원'"></s>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="prod_guide_wrap">
                            <div class="prod_guide_box">
                                <div class="prod_guide_row">
                                    <div class="prod_guide_title">적립/혜택</div>
                                    <div class="prod_guide_cont">
                                        <div class="point_text">
                                            940P
                                            <div class="tooltip_wrap type_info right">
                                                <button type="button" class="btn_tooltip" data-btn-toggle="">
                                                    <span class="ico_arw"></span>
                                                    <span class="hidden">툴팁열기</span>
                                                </button>
                                                <div class="tooltip_inner">
                                                    <div class="tooltip_contents">

                                                        <div class="tooltip_info_list">

                                                            <div class="tooltip_info_item">
                                                                <div class="title_wrap title_size_xxs">
                                                                    <p class="title_heading">기본적립</p>
                                                                </div>
                                                                <div class="info_cont">
                                                                    <p class="bul_item_branch font_size_min">
                                                                        <span class="cont_title">5% 적립</span>
                                                                        <span class="cont_desc">940P</span>
                                                                    </p>
                                                                </div>
                                                            </div>

                                                            <div class="tooltip_info_item">
                                                                <div class="title_wrap title_size_xxs">
                                                                    <p class="title_heading">
                                                                        <span>추가적립</span>
                                                                        <button type="button" class="btn_info_popup"
                                                                                data-role="btn-dialog"
                                                                                data-target="#popAccrualPointGuide">
                                                                            <span class="ico_question"></span>
                                                                            <span class="hidden">팝업 열기</span>
                                                                        </button>
                                                                    </p>
                                                                </div>
                                                                <div class="info_cont">
                                                                    <ul class="bul_list">
                                                                        <li class="bul_item_dot font_size_min">
                                                                            <span class="cont_title">5만원 이상 구매 시 추가</span>
                                                                            <span class="cont_desc">2,000P</span>
                                                                        </li>


                                                                        <li class="bul_item_dot font_size_min">
                                                                            <span class="cont_title">3만원 이상 구매 시, 등급별 2~4% 추가</span>
                                                                            <span class="cont_desc">최대 940P</span>
                                                                        </li>

                                                                        <li class="bul_item_dot font_size_min">
                                                                            <span class="cont_title">리뷰 작성 시, e교환권 추가</span>
                                                                            <span class="cont_desc">최대 300원</span>
                                                                        </li>


                                                                    </ul>
                                                                </div>
                                                            </div>

                                                            <div class="tooltip_info_item">
                                                                <div class="title_wrap title_size_xxs">
                                                                    <p class="title_heading">부가혜택 안내</p>

                                                                    <div class="right_area">
                                                                        <div class="benefit_link_box">
                                                                            <a href="#" class="btn_link"
                                                                               data-role="btn-dialog"
                                                                               data-target="#popAffiliatePoints">제휴포인트</a>
                                                                            <a href="#" class="btn_link"
                                                                               data-role="btn-dialog"
                                                                               data-target="#popBookIncomeDeduction">도서소득공제</a>
                                                                            <a href="https://www.kyobobook.co.kr/benefit"
                                                                               class="btn_link">쿠폰/혜택</a>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                            </div>


                            <div class="prod_guide_box">

                                <div class="prod_guide_row">
                                    <div class="prod_guide_title">배송안내</div>
                                    <div class="prod_guide_cont">
                                        <div class="delivery_guide_text">
                                            <span id="OrderDeliveryType" class="delivery_type">무료배송</span>
                                            <div class="tooltip_wrap type_sm right">
                                                <button type="button" class="btn_tooltip" data-btn-toggle="">
                                                    <span class="ico_info"></span>
                                                    <span class="hidden">툴팁열기</span>
                                                </button>
                                                <div class="tooltip_inner">
                                                    <div class="tooltip_header">
                                                        <div class="tooltip_head_title">배송비 안내</div>
                                                    </div>
                                                    <div class="tooltip_contents">
                                                        <div class="tooltip_sub_title">국내도서/외국도서</div>
                                                        <div class="tooltip_desc">
                                                            도서만 15,000원 이상 구매 시 무료배송
                                                            <br>도서+교보Only(교보배송)을 함께 15,000원 이상 구매 시 무료배송
                                                        </div>
                                                        <p class="bul_item_asterisk font_size_xxs">15,000원 미만 시 2,500원
                                                            배송비 부과</p>

                                                        <div class="tooltip_sub_title">교보Only(교보배송)</div>
                                                        <div class="tooltip_desc">
                                                            각각 구매하거나 함께 20,000원 이상 구매 시 무료배송
                                                        </div>
                                                        <p class="bul_item_asterisk font_size_xxs">20,000원 미만 시 2,500원
                                                            배송비 부과</p>

                                                        <div class="tooltip_sub_title">해외주문 서양도서/해외주문 일본도서(교보배송)</div>
                                                        <div class="tooltip_desc">
                                                            각각 구매하거나 함께 15,000원 이상 구매 시 무료배송
                                                        </div>
                                                        <p class="bul_item_asterisk font_size_xxs">15,000원 미만 시 2,500원
                                                            배송비 부과</p>

                                                        <div class="tooltip_sub_title">업체배송 상품(전집, GIFT, 음반/DVD 등)</div>
                                                        <div class="tooltip_desc">
                                                            해당 상품 상세페이지 "배송비" 참고 (업체 별/판매자 별 무료배송 기준 다름)
                                                        </div>

                                                        <div class="tooltip_sub_title">바로드림 오늘배송</div>
                                                        <div class="tooltip_desc">
                                                            업체에서 별도 배송하여 1Box당 배송비 2,500원 부과
                                                        </div>
                                                        <p class="bul_item_asterisk font_size_xxs">1Box 기준 : 도서 10권</p>

                                                        <div class="tooltip_sub_title">그 외 무료배송 기준</div>
                                                        <div class="tooltip_desc">
                                                            바로드림, eBook 상품을 주문한 경우, 플래티넘/골드/실버회원 무료배송쿠폰 이용하여 주문한 경우,
                                                            무료배송 등록 상품을 주문한 경우
                                                        </div>

                                                    </div>
                                                    <button type="button" class="btn_tooltip_close"><span
                                                            class="hidden">툴팁닫기</span></button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <form action="/cart/create" method="post">
                            <div class="btn_wrap justify overlap">
                                <input name="id" th:value="${book.bookId}" hidden>
                                <input name="name" th:value="${book.bookTitle}" hidden>
                                <input name="quantity" value="1" hidden>
                                <input name="regularPrice" th:value="${book.bookRegularPrice}" hidden>
                                <input name="salePrice" th:value="${book.bookSalePrice}" hidden>
                                <input name="thumbnail" th:value="${book.thumbnail}" hidden>
                                <button type="submit" class="btn_sm btn_line_gray" data-role="btn-dialog"
                                        data-target="#popStock"
                                        onclick="">
                                    <span class="text">장바구니 담기</span></button>
                            </div>
                        </form>
                        <div class="btn_wrap justify overlap">
                            <button type="button" class="btn_sm btn_line_gray" data-role="btn-dialog"
                                    data-target="#popStock"
                                    onclick="">
                                <span class="text">주문 하기</span></button>
                        </div>
                        <div class="btn_wrap justify overlap">
                            <button type="button" class="btn_sm btn_line_gray" data-role="btn-dialog"
                                    data-target="#popStock"
                                    onclick="">
                                <span class="text">♥️ 위시리스트 담기</span></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <div class="header_contents_inner">
            <div class="row">
                <div>
                    <h2 style="padding-bottom: 2%;" class="title_heading">책 정보</h2>

                    <table style="width: 100%;" class="table table-bordered">
                        <colgroup>
                            <col width="170">
                            <col width="*">
                        </colgroup>
                        <tbody>
                        <tr style="border: 1px">
                            <th class="product-info-head">발행일</th>
                            <td class="product-info-body" th:text="${book.bookPublicationDate}"></td>
                        </tr>

                        <tr>
                            <th class="product-info-head">ISBN</th>
                            <td class="product-info-body" th:text="${book.bookIsbn}"></td>
                        </tr>

                        <tr>
                            <th class="product-info-head">출판사</th>
                            <td class="product-info-body" th:text="${book.bookPublisher}"></td>
                        </tr>
                        </tbody>
                    </table>

                </div>
            </div>
        </div>
        <hr>
        <div class="header_contents_inner">
            <div class="row">
                <h2 data-nodeid="1" class="title_heading">책소개</h2>
                <div class="product_detail_area detail_img">
                    <div class="inner" th:utext="${book.bookDescription}">
                    </div>
                </div>
            </div>
            <div class="row">
                <h2 data-nodeid="5" class="title_heading">목차</h2>
                <div class="product_detail_area detail_img">
                    <div class="inner" th:text="${book.bookIndex}">
                    </div>
                </div>
            </div>
        </div>
        <div class="product_detail_area klover_review_wrap" data-event-detail="review" id="ReviewList1"
             data-kbbfn="ui-module" data-kbbfn-name="review-list" data-kbbfn-type="klover"
             data-kbbfn-prod-pid="S000201621022" data-kbbfn-prod-bid="9791167740984" data-kbbfn-prod-title="도둑맞은 집중력"
             data-kbbfn-prod-code="KOR" data-kbbfn-prod-age="0">
            <div class="header_contents_inner">
                <div class="title_wrap title_size_md has_btn" data-kbbfn-role="title">
                    <!-- 타이틀 영역 -->
                    <p class="title_heading" data-review-label="title"
                       th:text="'총 리뷰 ' + ${pagination.totalElements} + '건'"></p>
                    <div data-kbbfn-role="title">
                        <div class="right_area" id="reviewButton">
                            <p class="bul_item_asterisk font_size_xxs">리뷰 작성 시 200포인트 적립, 사진 포함 시 500포인트 적립</p>

                        </div>
                    </div>
                </div>

                <div class="klover_review_box">
                    <div class="klover_box_left">
                        <div class="rating-stars" tabindex="0">
                            <span class="filled-stars">
                                <span class="star">
                                    <i class="glyphicon glyphicon-star"></i>
                                </span>
                            </span>
                        </div>
                    </div>
                    <div class="klover_box_right">
                        <div class="caption"><span class="caption-badge caption-secondary">
                            <span class="val" aria-hidden="true" th:text="${totalRate}"></span>
                            <span class="total" aria-hidden="true">/5</span></span>
                        </div>
                    </div>

                </div>

                <div class="tab_wrap type_sm" data-kbbfn-role="tab-view" data-type-btn="">
                    <div class="tab_list_wrap">
                        <ul class="tabs">
                            <li class="tab_item ui-state-active" data-value="000">
                                <button class="tab_link" type="button">
                                    <span class="tab_text">전체 리뷰</span></button>
                            </li>
                        </ul>
                        <div class="right_area">
                            <div class="form_sel type_sm"><select id="ui-id-40" style="display: none;">
                                <option value="001" selected="selected">좋아요 순</option>
                                <option value="002">최신순</option>
                            </select><span tabindex="0" id="ui-id-40-button" role="combobox" aria-expanded="false"
                                           aria-autocomplete="list" aria-owns="ui-id-40-menu" aria-haspopup="true"
                                           class="ui-selectmenu-button ui-selectmenu-button-closed ui-corner-all ui-button ui-widget"><span
                                    class="ui-selectmenu-icon ui-icon ui-icon-triangle-1-s"></span><span
                                    class="ui-selectmenu-text">좋아요 순</span></span></div>
                        </div>
                    </div>
                    <div class="tab_content">
                        <div class="comment_wrap">
                            <div class="comment_list" style="">
                                <div class="comment_item" th:each="review : ${pagination.content}">
                                    <div class="comment_header">
                                        <div class="left_area">
                                            <div class="user_info_box"><span class="badge_box"><span
                                                    class="badge_sm badge_pill badge_kyobo"><span
                                                    class="text">종이책</span></span></span><span
                                                    class="info_item" th:text="${review.author}"></span><span
                                                    class="gap"> | </span><span
                                                    class="info_item"
                                                    th:text="${review.reviewDate}"></span><span
                                                    class="gap"> | </span><span
                                                    class="info_item"><button class="btn_comment_util" type="button"
                                                                              data-role="report">
                                                <span class="text">신고/차단</span></button>
                                            </span>
                                            </div>
                                        </div>
                                        <div class="right_area">
                                            <div class="review_summary_wrap">
                                                <div class="rating-container theme-krajee-gly rating-sm rating-animate rating-disabled">
                                                    <div class="clear-rating " title="초기화">
                                                        <i class="glyphicon glyphicon-minus-sign"></i>
                                                    </div>
                                                    <div class="rating-stars" tabindex="0">
                                                        <span class="empty-stars" th:if="${review.reviewRate != 5}">
                                                            <span class="star"
                                                                  th:each="i : ${#numbers.sequence(1, 5 - review.getReviewRate())}">
                                                                <i class="glyphicon glyphicon-star-empty"></i>
                                                            </span>
                                                        </span>
                                                        <span class="filled-stars" th:if="${review.reviewRate > 0}">
                                                            <span class="star"
                                                                  th:each="i : ${#numbers.sequence(1, review.getReviewRate())}">
                                                                <i class="glyphicon glyphicon-star"></i>
                                                            </span>
                                                        </span>
                                                    </div>

                                                    <div class="caption"><span
                                                            class="caption-badge caption-success"
                                                            th:text="${totalRate}"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="comment_contents">
                                        <div class="comment_contents_inner" th:id="${review.reviewId}">
                                            <div class="comment_view_wrap">
                                                <div class="comment_text_box">
                                                    <div class="comment_text" th:text="${review.message}"></div>
                                                    <div class="thumb_box_div">
                                                        <div class="comment_thumb_box"
                                                             th:id="'thumb' + ${review.reviewId}">
                                                        <span class="comment_thumb_view"
                                                              th:each="img : ${review.filePath}"
                                                              th:style="'background-image: url(' + ${img} + ');'">
                                                            <img th:src="${img}" alt="리뷰 썸네일"/>
                                                        </span>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="comment_swiper_wrap">
                                                <div class="swiper-container">
                                                    <ul class="swiper-wrapper">
                                                        <li class="swiper-slide" th:each="img : ${review.filePath}">
                                                            <div class="comment_img_box"
                                                                 th:style="'background-image: url(' + ${img} + ');'"
                                                                 onclick="openImage(this)">
                                                                <button class="btn_view_img" type="button">
                                                                    <img th:src="${img}">
                                                                </button>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="swiper-button-next" style="display: none;"><span
                                                        class="hidden">다음</span></div>
                                                <div class="swiper-button-prev" style="display: none;"><span
                                                        class="hidden">이전</span></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="comment_footer">
                                        <button class="btn_more_body" type="button" data-btn-toggle=""
                                                th:value="${review.reviewId}"
                                                onclick="toggleButton(this)"><span
                                                class="text" th:text="펼치기"></span><span class="ico_arw"></span></button>
                                    </div>
                                </div>
                            </div>
                            <div class="pagination" style="justify-content: center">
                                <nav aria-label="Page navigation example">
                                    <ul class="pagination justify-content-center">
                                        <li class="page-item" th:classappend="${!(pagination.number > 0)} ? 'disabled'">
                                            <a class="page-link"
                                               th:href="@{'/product/view/' + ${book.bookId}(page=${pagination.number - 1})}">Previous</a>
                                        </li>
                                        <th:block
                                                th:with="start=1, end=${(pagination.totalPages == 0) ? 1 : pagination.totalPages}">
                                            <li class="page-item" th:each="page: ${#numbers.sequence(start, end)}">
                                                <a class="page-link"
                                                   th:href="@{'/product/view/' + ${book.bookId}(page=${page - 1})}"
                                                   th:text="${page}"></a></li>
                                        </th:block>
                                        <li class="page-item"
                                            th:classappend="${!(pagination.number < pagination.totalPages - 1)} ? 'disabled'">
                                            <a class="page-link"
                                               th:href="@{'/product/view/' + ${book.bookId}(page=${pagination.getNumber()+1})}">Next</a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">New message</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="reviewForm" th:action="@{'/review/' + ${book.bookId}}" method="post"
                          enctype="multipart/form-data">
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">리뷰 점수</label>
                            <input type="number" name="reviewRate" class="form-control" id="recipient-name" min="1"
                                   max="5" placeholder="1에서 5사이의 정수를 입력해주세요.">
                        </div>
                        <div class="mb-3">
                            <label for="message-text" class="col-form-label">리뷰 작성*</label>
                            <textarea class="form-control" name="reviewComment" id="message-text"></textarea>
                        </div>
                        <ul class="file_list" id="fileList">
                            <li class="list_item">
                                <span class="file_item">
                                    <span class="btn_box">
                                        <input id="image1" name="imageList" type="file" accept="image/*">
                                        <label for="image1">
                                            <span class="hidden">첨부파일 추가</span>
                                        </label>
                                        <span class="attach_img_box">
                                            <span class="attach_img_view" id="attach1"></span>
                                            <button class="btn_remove_img" type="button"
                                                    onclick="removeFileListItem(this)">
                                                <span class="hidden">첨부파일 삭제</span>
                                            </button>
                                        </span>
                                    </span>
                                </span>
                            </li>
                        </ul>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" form="reviewForm" class="btn btn-primary">Send message</button>
                </div>
            </div>
        </div>
    </div>
    <script src="/js/view.js"></script>
    </body>
</div>
</html>
