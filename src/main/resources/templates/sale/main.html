<!DOCTYPE html>
<html lang="ko"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default}">

<!-- λ³Έλ¬Έ λ‚΄μ© -->
<div layout:fragment="content">
    <style>

        table {
            text-align: center;
            vertical-align: middle;
        }

        td > input {
            margin-left: 30%;
            margin-top: 10%;
        }

        td > span {
            font-size: 14px;
            color: darkolivegreen;
        }

        .discount {
            color: dodgerblue;
        }

        .delivery-text {
            padding: 3% 3% 3% 3%;
            background-color: #444444;
            border-radius: 5px;
            color: #ffffff;
            position: absolute;
            display: none;
        }

        .delivery-title:hover + .delivery-text {
            display: block;
        }

    </style>

    <form action="#" th:action="@{/}" class="bg0 p-t-75 p-b-85">
        <div class="container">
            <div class="row">
                <div class="col-lg-10 col-xl-7 m-lr-auto m-b-50">
                    <div class="m-l-25 m-r--38 m-lr-0-xl">
                        <div class="wrap-table-shopping-cart">
                            <table class="table-shopping-cart" style="text-align: center;">
                                <tr class="table_head">
                                    <th class="column-1"></th>
                                    <th class="column-2">μƒν’λ…</th>
                                    <th class="column-3">νλ§¤κ°€</th>
                                    <th class="column-4">μλ‰</th>
                                    <th class="column-5">μΏ ν°</th>
                                    <th class="column-6">μ£Όλ¬ΈκΈμ•΅</th>
                                    <th class="column-7">π ν¬μ¥μ§€</th>
                                </tr>

                                <tr class="table_row" th:each="bookSale : ${bookSaleList}">
                                    <input type="hidden" th:value="${bookSale.bookId}" name="bookId">
                                    <input type="hidden" th:value="${bookSale.bookSalePrice}" name="bookSalePrice">
                                    <input type="hidden" th:id="${bookSale.bookId} + '-coupon'" value=""
                                           name="appliedCouponId">
                                    <td class="column-1">
                                        <div class="how-itemcart1">
                                            <img src="https://kr1-api-object-storage.nhncloudservice.com/v1/AUTH_c20e3b10d61749a2a52346ed0261d79e/bookpub/product/thumbnail/03331c62-d8db-40c8-8f25-2f4160ad8122.png"
                                                 alt="IMG">
                                        </div>
                                    </td>

                                    <td class="column-2" th:text="${bookSale.bookTitle}"></td>
                                    <td class="column-3">
                                        <span th:text="${bookSale.bookSalePrice}"></span> μ›
                                    </td>
                                    <td class="column-4" th:text="1"></td>
                                    <td class="column-5">
                                        <button type="button" th:value="${bookSale.bookId}"
                                                class="flex-c-m stext-101 cl2 size-106 bg8 bor13 hov-btn3 p-lr-15 trans-04 pointer m-tb-10"
                                                data-toggle="modal"
                                                th:attr="data-target='#applyCouponBtn-' + ${bookSale.bookId}"
                                                th:id="'couponBtn-' + ${bookSale.bookId}"
                                                th:onclick="|renderCoupon(${bookSale.bookId})|">
                                            μΏ ν° μ„ νƒ
                                        </button>

                                        <button type="button"
                                                style="display: none;"
                                                class="flex-c-m stext-101 cl2 size-106 bg8 bor13 hov-cancel-btn p-lr-15 trans-04 pointer m-tb-10"
                                                th:id="'cancelApplyBtn-' + ${bookSale.bookId}"
                                                th:onclick="|cancelCoupon(${bookSale.bookId})|">
                                            μΏ ν° μ·¨μ†
                                        </button>

                                        <!-- Coupon Modal -->
                                        <div class="modal fade" th:id="'applyCouponBtn-' + ${bookSale.bookId}"
                                             tabindex="-1" role="dialog"
                                             aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                            <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="applyCouponBtnTitle">μ μ© κ°€λ¥ μΏ ν°
                                                            λ¦¬μ¤νΈ</h5>
                                                        <button type="button" class="close" data-dismiss="modal"
                                                                aria-label="Close">
                                                            <span aria-hidden="true">&times;</span>
                                                        </button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <table class="table"
                                                               th:id="'couponTable-' + ${bookSale.bookId}">
                                                            <thead>
                                                            <tr>
                                                                <th scope="col"></th>
                                                                <th scope="col">μΏ ν°λ…</th>
                                                                <th scope="col">ν• μΈμ¨ / ν• μΈκΈμ•΅</th>
                                                                <th scope="col">ν• μΈκΈμ•΅</th>
                                                            </tr>
                                                            </thead>
                                                            <tbody>
                                                            <tr>
                                                                <td>λΌλ””μ¤λ²„νΌ</td>
                                                                <td>μΏ ν°λ…</td>
                                                                <td>ν• μΈμ¨</td>
                                                                <td>ν• μΈκΈμ•΅</td>
                                                            </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary"
                                                                data-dismiss="modal">λ‹«κΈ°
                                                        </button>
                                                        <button type="button" class="btn btn-dark"
                                                                th:id="'couponApplyBtn-' + ${bookSale.bookId}"
                                                                th:onclick="|applyCoupon(${bookSale.bookId})|">
                                                            μΏ ν° μ μ©
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="column-6">
                                        <span th:id="${bookSale.bookId} + '-saleOrderPrice'" class="salePrice"
                                              th:text="${bookSale.bookSalePrice} * 2"></span> μ›
                                    </td>
                                    <td class="column-7">
                                        <label>
                                            <select class="packaging form-control form-control-sm">
                                                <option selected value="0">μ„ νƒ X</option>
                                                <option th:if="${bookSale.bookPackaging}"
                                                        th:each="packaging : ${policyList.getPackagingPolicies()}"
                                                        th:value="${packaging.packagingId}"
                                                        th:text="${packaging.packagingType} + ' / ' + ${packaging.packagingPrice} + 'μ›'">
                                                </option>
                                            </select>
                                        </label>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <div class="flex-w flex-sb-m bor15 p-t-18 p-b-15 p-lr-40 p-lr-15-sm">
                            <p class="stext-111 p-t-2" style="color: #760c0c;">
                                νμ› - μΏ ν°μ„ μ‚¬μ©ν•μ—¬ κµ¬λ§¤ν•  κ²½μ° ν™λ¶ν•  λ• μΏ ν°μ€ ν™λ¶λμ§€ μ•μµλ‹λ‹¤. <br/>
                                λΉ„νμ› - λΉ„νμ›μ€ μΏ ν°μ„ μ‚¬μ©ν•  μ μ—†μµλ‹λ‹¤.
                            </p>
                        </div>

                        <div class="flex-w flex-sb-m bor15 p-t-18 p-b-15 p-lr-40 p-lr-15-sm">

                            <h4>μ£Όλ¬Έμ μ •λ³΄</h4>

                            <input type="text" class="stext-104 cl2 plh4 size-116 bor13 p-lr-20 m-r-10 m-tb-5"
                                   placeholder="μ£Όλ¬Έμ μ΄λ¦„μ„ μ…λ ¥ν•΄μ£Όμ„Έμ”." name="saleOrderName"
                                   aria-placeholder="μ£Όλ¬Έμ μ΄λ¦„" aria-label="μ£Όλ¬Έμ μ΄λ¦„">

                            <input type="text" class="stext-104 cl2 plh4 size-116 bor13 p-lr-20 m-r-10 m-tb-5"
                                   placeholder="μ—°λ½μ²λ¥Ό μ…λ ¥ν•΄μ£Όμ„Έμ”. ('-' μ μ™Έ)" name="saleOrderContact"
                                   aria-placeholder="μ£Όλ¬Έμ μ—°λ½μ²" aria-label="μ£Όλ¬Έμ μ—°λ½μ²">

                        </div>

                        <div class="flex-w flex-sb-m bor15 p-t-18 p-b-15 p-lr-40 p-lr-15-sm">

                            <h4>μλ Ήμ μ •λ³΄</h4>

                            <input type="text" class="stext-104 cl2 plh4 size-116 bor13 p-lr-20 m-r-10 m-tb-5"
                                   placeholder="μλ Ήμ μ΄λ¦„μ„ μ…λ ¥ν•΄μ£Όμ„Έμ”." name="saleReceiverName"
                                   aria-placeholder="μλ Ήμ μ΄λ¦„" aria-label="μλ Ήμ μ΄λ¦„">

                            <input type="text" class="stext-104 cl2 plh4 size-116 bor13 p-lr-20 m-r-10 m-tb-5"
                                   placeholder="μ—°λ½μ²λ¥Ό μ…λ ¥ν•΄μ£Όμ„Έμ”. ('-' μ μ™Έ)" name="saleReceiverContact"
                                   aria-placeholder="μλ Ήμ μ—°λ½μ²" aria-label="μλ Ήμ μ—°λ½μ²">
                        </div>

                        <div class="flex-w flex-sb-m bor15 p-t-18 p-b-15 p-lr-40 p-lr-15-sm">

                            <h4> ν¬μΈνΈ μ‚¬μ©</h4>

                            <span style="margin-bottom: 20px;"> λ³΄μ μ¤‘μΈ ν¬μΈνΈ :
                                <span style="color: #13653f"> 15000</span> μ›
                            </span>

                            <div class="input-group" style="vertical-align: middle">
                                <input id="memberPoint" type="number" value="0"
                                       class="stext-104 cl2 plh4 size-126 bor13 p-lr-20 m-r-10 m-tb-5"
                                       placeholder="μ‚¬μ©ν•  ν¬μΈνΈλ¥Ό μ…λ ¥ν•΄μ£Όμ„Έμ”." name="saleReceiverName"
                                       aria-placeholder="ν¬μΈνΈ" aria-label="ν¬μΈνΈ">
                                <div class="input-group-append">
                                    <button class="stext-104 cl2 size-127 bg8 bor13 hov-btn3 p-lr-20 m-t-5 m-r-10 b-tb-5 trans-04 pointer"
                                            type="button"
                                            onclick="applyPoint()">ν¬μΈνΈ μ‚¬μ©
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="flex-w flex-sb-m bor15 p-t-18 p-b-15 p-lr-40 p-lr-15-sm">

                            <h4>λ°°μ†΅ μμ•½μΌ</h4>
                            <span class="stext-111 cl6 p-t-2"> μμ•½μΌμ„ μ§€μ •ν•μ§€ μ•μΌλ©΄ 2μΌ λ’¤λ΅ μ§€μ •λ©λ‹λ‹¤. </span>

                            <input type="date" class="stext-104 cl2 plh4 size-115 bor13 p-lr-20 m-r-10 m-tb-"
                                   name="saleDeliveryDate" id="saleDeliveryDate" aria-label="λ°°μ†΅ μμ•½μΌ">
                        </div>
                    </div>
                </div>


                <div class="col-sm-10 col-lg-7 col-xl-5 m-lr-auto m-b-50">
                    <div class="bor10 p-lr-40 p-t-30 p-b-40 m-l-63 m-r-40 m-lr-0-xl p-lr-15-sm">
                        <h4 class="mtext-109 cl2 p-b-30">
                            π“¦ Order Checkout
                        </h4>

                        <div class="  bor12 p-t-15 p-b-30">
                            <div class="size-208 w-full-ssm">
								<span class="stext-110 cl2">
									λ°°μ†΅ μ •λ³΄
								</span>
                            </div>

                            <div class="p-r-18 p-r-0-sm w-full-ssm">
                                <p class="stext-111 cl6 p-t-2">
                                    λ°°μ†΅λ°›μΌμ‹¤ μ£Όμ†λ¥Ό μ…λ ¥ν•΄μ£Όμ„Έμ”.
                                </p>

                                <div class="p-t-15">

                                    <div class="bor8 bg0 m-b-12">
                                        <input class="stext-111 cl8 plh3 size-111 p-lr-15" type="text" name="postcode"
                                               id="postcode" placeholder="μ°νΈλ²νΈ" readonly onclick="execDaumPostcode()">
                                    </div>

                                    <div class="bor8 bg0 m-b-12">
                                        <input class="stext-111 cl8 plh3 size-111 p-lr-15" type="text" name="address"
                                               id="address" placeholder="λ„λ΅λ…/μ§€λ² μ£Όμ†" readonly
                                               onclick="execDaumPostcode()">
                                    </div>

                                    <div class="bor8 bg0 m-b-12">
                                        <input class="stext-111 cl8 plh3 size-111 p-lr-15" type="text"
                                               name="detailAddress" id="detailAddress"
                                               placeholder="μƒμ„Έ μ£Όμ†">
                                    </div>

                                    <div class="flex-w">
                                        <input type="button"
                                               class="flex-c-m stext-101 cl2 size-111 bg8 bor13 hov-btn3 p-lr-15 trans-04 pointer"
                                               value="μ£Όμ† μ°ΎκΈ°" onclick="execDaumPostcode()">
                                    </div>

                                </div>
                            </div>
                        </div>


                        <div class="flex-w flex-t p-t-27 p-b-10">
                            <div class="size-208">
                                <span class="stext-117 cl2">
                                    λ°°μ†΅λΉ„
                                    <span class="delivery-title">π</span>
                                    <span class="delivery-text">50,000μ› μ΄μƒ μ£Όλ¬Έμ‹ λ¬΄λ£ λ°°μ†΅</span>
                                </span>
                            </div>

                            <div class="size-209 p-t-1">
								<span class="stext-117 cl2">
									<span id="deliveryPrice"
                                          th:text="${policyList.getDeliveryPolicy().deliveryPolicyFee}"></span> μ›
								</span>
                            </div>
                        </div>

                        <div class="flex-w flex-t p-t-10 p-b-10">
                            <div class="size-208">
								<span class="stext-117 cl2">
									ν¬μ¥ κΈμ•΅
								</span>
                            </div>

                            <div class="size-209 p-t-1">
								<span class="stext-117 cl2">
									<span id="totalPackagingPrice">0</span> μ›
								</span>
                            </div>
                        </div>

                        <div class="flex-w flex-t p-t-10 p-b-10">
                            <div class="size-208">
								<span class="stext-117 cl2">
									λ„μ„ κΈμ•΅
								</span>
                            </div>

                            <div class="size-209 p-t-1">
								<span class="stext-117 cl2">
									<span id="totalOrderPrice">0</span> μ›
								</span>
                            </div>
                        </div>

                        <div class="flex-w flex-t p-t-10 p-b-10">
                            <div class="size-208">
                                <span class="stext-117 cl2">
                                    μΏ ν° ν• μΈ
                                </span>
                            </div>

                            <div class="size-209 p-t-1">
                                <span class="discount stext-117 cl2">
									- <span id="totalCouponDiscount">0</span> μ›
								</span>
                            </div>
                        </div>

                        <div class="flex-w flex-t p-t-10 p-b-10">
                            <div class="size-208">
                                <span class="stext-117 cl2">
                                    ν¬μΈνΈ μ‚¬μ©
                                </span>
                            </div>

                            <div class="size-209 p-t-1">
                                <span class="discount stext-117 cl2">
									- <span id="pointDiscount">0</span> μ›
								</span>
                            </div>
                        </div>


                        <div class="flex-w flex-t p-t-10 p-b-33">
                            <div class="size-208">
								<span class="stext-117 cl2">
									κ²°μ ν•  κΈμ•΅
								</span>
                            </div>

                            <div class="size-209 p-t-1">
								<span class="stext-117 cl2">
									<span id="totalPrice">0</span> μ›
								</span>
                            </div>
                        </div>


                        <button type="submit"
                                class="flex-c-m stext-101 cl0 size-116 bg3 bor14 hov-btn3 p-lr-15 trans-04 pointer">
                            π§™π»β€ μ£Όλ¬Έν•κΈ°
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <!-- Daum μ£Όμ† -->
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script src="/js/address.js"></script>
    <script>

        // ν„μ¬ λ‚ μ§ κΈ°μ¤€μΌλ΅ 2μΌμ„ λ”ν• λ‚ μ§λ¥Ό κ°€μ Έμ¤λ” ν•¨μ
        function getDefaultDeliveryDate() {
            var today = new Date();
            var deliveryDate = new Date(today);

            // μµμ† μμ•½ λ°°μ†΅μΌμλ” ν„μ¬ λ‚ μ§ + 2μΌ
            deliveryDate.setDate(deliveryDate.getDate() + 2);

            var dd = deliveryDate.getDate();
            var mm = deliveryDate.getMonth() + 1;
            var yyyy = deliveryDate.getFullYear();

            if (dd < 10) {
                dd = '0' + dd;
            }

            if (mm < 10) {
                mm = '0' + mm;
            }

            return yyyy + '-' + mm + '-' + dd;
        }

        function getMaxDeliveryDate() {
            var today = new Date();
            var deliveryDate = new Date(today);

            // μµλ€ μμ•½ λ°°μ†΅μΌμλ” ν„μ¬ λ‚ μ§ + 59μΌ
            deliveryDate.setDate(deliveryDate.getDate() + 59);

            var dd = deliveryDate.getDate();
            var mm = deliveryDate.getMonth() + 1;
            var yyyy = deliveryDate.getFullYear();

            if (dd < 10) {
                dd = '0' + dd;
            }

            if (mm < 10) {
                mm = '0' + mm;
            }

            return yyyy + '-' + mm + '-' + dd;
        }


        // λ°°μ†΅ λ‚ μ§ input μ”μ†μ μµμ†, μµλ€ λ‚ μ§λ¥Ό μ„¤μ •ν•λ” ν•¨μ
        function setMinDeliveryDate() {
            var deliveryDateInput = document.getElementById('saleDeliveryDate');
            if (deliveryDateInput) {
                deliveryDateInput.value = getDefaultDeliveryDate();
                deliveryDateInput.min = getDefaultDeliveryDate();
                deliveryDateInput.max = getMaxDeliveryDate();
            }
        }


        // λ¬Έμ„κ°€ λ΅λ“λλ©΄ μµμ† λ°°μ†΅ λ‚ μ§λ¥Ό μ„¤μ •ν•©λ‹λ‹¤.
        window.onload = function () {
            setMinDeliveryDate();
        };


    </script>

    <script th:inline="javascript">
        /*<![CDATA[*/
        let packagingPrices = new Map();
        packagingPrices.set(0, 0);
        /*[# th:each="packaging : ${policyList.getPackagingPolicies()}"]*/
        packagingPrices.set([[${packaging.packagingId}]], [[${packaging.packagingPrice}]]);
        /*[/]*/

        let freeDeliveryPrice = [[${policyList.getDeliveryPolicy().deliveryPolicyCondition}]];
        /*]]>*/

        console.log(freeDeliveryPrice);

        // μ£Όλ¬Έ λ„μ„ κΈμ•΅ κ³„μ‚°
        let totalOrderPrice = 0;
        let salePrice = document.querySelectorAll('.salePrice');
        console.log(salePrice);

        salePrice.forEach(price => {
            totalOrderPrice += parseInt(price.innerText);
        })
        document.getElementById('totalOrderPrice').textContent = totalOrderPrice.toFixed(0);

        //-------------------------------

        // λ°°μ†΅ κΈμ•΅ κ³„μ‚°
        let deliveryPriceElement = document.getElementById('deliveryPrice');
        let deliveryPrice = parseInt(deliveryPriceElement.innerText); // parseInt μ¶”κ°€
        if (totalOrderPrice >= freeDeliveryPrice) {
            deliveryPrice = 0;
            deliveryPriceElement.textContent = deliveryPrice;
        }
        //-------------------------------

        // ν¬μ¥ κΈμ•΅ κ³„μ‚°
        let selectedPackagingId = document.querySelectorAll('select.packaging');

        let totalPackagingPrice = 0;
        selectedPackagingId.forEach(selectElement => {
            totalPackagingPrice += packagingPrices.get(parseInt(selectElement.value));
        });

        selectedPackagingId.forEach(selectElement => {
            selectElement.addEventListener('change', function (event) {
                // λ³€κ²½λ  λ•λ§λ‹¤ totalPrice μ΄κΈ°ν™”
                totalPackagingPrice = 0;
                // λ³€κ²½λ κ° μ”μ†μ κ°’μ„ totalPriceμ— λ”ν•¨
                selectedPackagingId.forEach(selectElement => {
                    totalPackagingPrice += packagingPrices.get(parseInt(selectElement.value));
                });
                updateTotalPackagingPrice(totalPackagingPrice);
                updateTotalPrice(); // ν¬μ¥ κΈμ•΅μ΄ λ³€κ²½λμ—μΌλ―€λ΅ κ²°μ  μ΄ κΈμ•΅μ„ λ‹¤μ‹ κ³„μ‚°
            });
        });

        // ν¬μ¥μ§€ μ„ νƒ μ‹ κΈμ•΅μ„ μ—…λ°μ΄νΈν•λ” ν•¨μ
        function updateTotalPackagingPrice(packagingPrice) {
            let totalPriceElement = document.getElementById('totalPackagingPrice');
            totalPriceElement.textContent = packagingPrice.toFixed(0);
        }

        //-------------------------------

        // κ²°μ  μ΄ κΈμ•΅ κ³„μ‚°
        function updateTotalPrice() {
            let totalPrice = document.getElementById('totalPrice');
            let couponDiscount = parseInt(document.getElementById('totalCouponDiscount').textContent);
            let memberPoint = parseInt(document.getElementById('memberPoint').value);

            console.log(couponDiscount);

            totalPrice.textContent = (totalOrderPrice + totalPackagingPrice + deliveryPrice - couponDiscount - memberPoint).toFixed(0);
        }

        updateTotalPrice(); // νμ΄μ§€ λ΅λ“ μ‹ κ²°μ  μ΄ κΈμ•΅μ„ κ³„μ‚°ν•μ—¬ μ—…λ°μ΄νΈ

        //-------------------------------

        // μΏ ν° μ μ© μ‹ μΏ ν° ν• μΈ κΈμ•΅μ„ μ—…λ°μ΄νΈν•λ” ν•¨μ
        function updateCouponDiscountPrice(bookId, discountPrice) {
            // μΏ ν° ν• μΈ κΈμ•΅ μ—…λ°μ΄νΈ
            let totalCouponDiscountElement = document.getElementById('totalCouponDiscount');

            let totalCouponDiscount = parseInt(totalCouponDiscountElement.textContent);
            totalCouponDiscount += discountPrice;

            totalCouponDiscountElement.textContent = totalCouponDiscount;

            // κ²°μ  μ΄ κΈμ•΅ μ—…λ°μ΄νΈ
            updateTotalPrice();
        }

        //-------------------------------

        // ν¬μΈνΈ μ‚¬μ©μ‹ μ΄ κΈμ•΅μ„ μ—…λ°μ΄νΈν•λ” ν•¨μ
        function applyPoint() {
            let applyMemberPoint = parseInt(document.getElementById('memberPoint').value);
            let holdingMemberPoint = 15000;
            console.log(applyMemberPoint);

            // λ³΄μ ν• ν¬μΈνΈλ³΄λ‹¤ λ” λ§μ΄ μ‚¬μ©ν•μ§€ λ»ν•΄μ•Ό ν•¨.

            if (isNaN(applyMemberPoint)) {
                alert('μ‚¬μ©ν•  ν¬μΈνΈλ¥Ό μ«μλ΅ μ…λ ¥ν•΄μ£Όμ„Έμ”.');
                return;
            } else if (applyMemberPoint > holdingMemberPoint) {
                alert('λ³΄μ ν• ν¬μΈνΈλ³΄λ‹¤ λ” λ§μ΄ μ‚¬μ©ν•  μ μ—†μµλ‹λ‹¤.');
                return;
            } else if (applyMemberPoint < 0) {
                alert('0λ³΄λ‹¤ μ‘μ€ κ°’μ„ μ…λ ¥ν•  μ μ—†μµλ‹λ‹¤.');
                return;
            }

            alert('ν¬μΈνΈλ¥Ό μ‚¬μ©ν•μ€μµλ‹λ‹¤.');

            document.getElementById('pointDiscount').textContent = applyMemberPoint;

            updateTotalPrice();
        }
    </script>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script th:inline="javascript">
        /*<![CDATA[*/
        let bookInfo = new Map();
        /*[# th:each="book : ${bookSaleList}"]*/
        bookInfo.set([[${book.bookId}]], [[${book}]]);
        /*[/]*/
        /*]]>*/
        console.log(bookInfo);
    </script>
    <script src="/js/coupon.js"></script>

</div>

</html>